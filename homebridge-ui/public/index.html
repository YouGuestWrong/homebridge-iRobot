<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
<!--<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
<p class="text-center">
  <img src="https://user-images.githubusercontent.com/75853497/143301930-e2f3bc9a-9f0d-4e03-95f8-c69769712ca5.png"
    alt="homebridge-irobot logo" style="width: 60%;" />
</p>
<div id="pageIntro" class="text-center" style="display: none;">
  <p class="lead">Thank you for installing <strong>homebridge-iRobot</strong></p>
  <p> You can configure your iRobot on the next page </p>
  <button type="button" class="btn btn-primary" id="introContinue"> Continue &rarr; </button>
</div>
<div id="menuWrapper" class="btn-group w-100 mb-0" role="group" aria-label="UI Menu" style="display: none;">
  <button type="button" class="btn btn-primary ml-0" id="menuSettings" onclick="showSettings()"> Settings </button>
  <button type="button" class="btn btn-primary" id="menuDevices" onclick="showDevices()"> Devices </button>
</div>
<p class="mt-4 text-center" id="settingsHelp" style="display: none;">To configure your devices, use the devices tab</p>
<div id="pageDevices" class="mt-4" style="display: none;">
  <!--<div class="clearfix">
    <button id="deviceDelete" class="float-right btn btn-danger" style="display:none">Delete Device <i
        class="fas fa-trash-alt"></i></button>
    <button id="deviceAdd" class="float-right btn btn-info">Add Device <i class="fas fa-plus"></i></button>
  </div>-->
  <form>
    <div class="row align-items-center">
      <div class="col">
        <select class="form-control" id="deviceSelect"></select>
      </div>
      <div class="col-auto">
        <button class="btn btn-danger deviceButton"><i class="fas fa-trash-alt text-white"></i></button>
        <button class="btn btn-warning deviceButton"><i class="fas fa-pen-to-square text-white"></i></button>
        <button id="deviceAdd" class="btn btn-info" onclick="showAddDevices()"><i class="fas fa-plus text-white"></i></button>
      </div>
    </div>
  </form>
  <pre class="card" style="height: 55vh; overflow: scroll; white-space: pre-line" id="logZone"></pre>
</div>
<button type="button" class="btn btn-outline-warning ms-3" id="exitAddDevice" style="display:none" onclick="showDevices()">&larr;
  Exit</button>
<div class="text-center" id="pleaseWait" style="display: none;">
  <div style="height: 25vh"></div>
  <h3>Please wait</h3>
  <p>This may take a few minutes</p>
</div>
<script type="text/javascript" src="./bundle.js"></script>
<script>
  homebridge.getPluginConfig().then(currentConfig => {
    if (currentConfig.length) {
      showSettings();
    } else {
      currentConfig.push({ name: 'iRobot' });
      homebridge.updatePluginConfig(currentConfig).then(() => showIntro());
    }
  });
</script>
